<div class="container">
    <div class="row">
        <div class="col-md-12 pt-2">
            <h3>Ajouter un utilisateur</h3>
            <form [formGroup]="addUserForm"
                  (ngSubmit)="onSubmit()">

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="userName">Nom de l'utilisateur</mat-label>
                    <input matInput
                           formControlName="username"
                           id="userName"
                           placeholder="Enter his username">
                    <mat-error *ngIf="usernameCtrl.touched && usernameCtrl.hasError('required')">
                        Le nom de l'utilisateur est requis
                    </mat-error>
                    <mat-error *ngIf="usernameCtrl.touched && usernameCtrl.hasError('minlength')">
                        Le nom de l'utilisateur doit faire au moins 3 caractères
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="standard">
                    <mat-label>Rôle</mat-label>
                    <mat-select formControlName="role">
                        <mat-option *ngFor="let role of roles"
                                    [value]="role">
                            {{role}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="roleCtrl.touched && roleCtrl.hasError('required')">
                        Un rôle est requis
                    </mat-error>
                </mat-form-field>

                <mat-label>Activitées</mat-label>
                <mat-slide-toggle formControlName="reseller" color="primary">Revendeur</mat-slide-toggle>
                <mat-slide-toggle formControlName="producer" color="primary">Producteur</mat-slide-toggle>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="userEmail">Email</mat-label>
                    <input matInput
                           formControlName="email"
                           id="userEmail"
                           placeholder="Enter his email">
                    <mat-error *ngIf="emailCtrl.touched && emailCtrl.hasError('required')">
                        L'email est requis
                    </mat-error>
                    <mat-error *ngIf="emailCtrl.touched && emailCtrl.hasError('email')">
                        L'email n'est pas valide
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="registerPassword">Mots de passe</mat-label>
                    <input matInput
                           type="password"
                           name="password"
                           formControlName="password"
                           id="registerPassword">
                    <mat-error *ngIf="passwordCtrl.touched && passwordCtrl.hasError('required')">
                        Le mots de passe est requis
                    </mat-error>
                    <mat-error *ngIf="passwordCtrl.touched && passwordCtrl.hasError('minlength')">
                        Le mots de passe doit faire au moins 8 caractères
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="passwordRepeat">Confirmation du Mots de passe</mat-label>
                    <input matInput
                           type="password"
                           name="passwordRepeat"
                           formControlName="passwordRepeat"
                           id="password_repeat">
                    <mat-error *ngIf="passwordRepeatCtrl.touched && passwordRepeatCtrl.hasError('required')">
                        La confirmation du mots de passe est requise
                    </mat-error>
                    <mat-error *ngIf="passwordRepeatCtrl.touched && passwordRepeatCtrl.hasError('mustMatch')">
                        La confirmation du mots de passe n'est pas valide
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="company">Société</mat-label>
                    <input matInput
                           type="text"
                           name="company"
                           formControlName="company"
                           id="company">
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="adress">Adresse</mat-label>
                    <input matInput
                           type="text"
                           name="adress"
                           formControlName="adress"
                           id="adress">
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="adress">Détails de l'adresse</mat-label>
                    <input matInput
                           type="text"
                           name="adress_details"
                           formControlName="adress_details">
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="postal_code">Code postal</mat-label>
                    <input matInput
                           type="text"
                           name="postal_code"
                           formControlName="postal_code"
                           id="postal_code">
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="city">Ville</mat-label>
                    <input matInput
                           type="text"
                           name="city"
                           formControlName="city"
                           id="city">
                </mat-form-field>

                <mat-form-field appearance="standard"
                                color="accent">
                    <mat-label for="tel">Téléphone</mat-label>
                    <input matInput
                           type="text"
                           name="tel"
                           formControlName="tel"
                           id="tel">
                </mat-form-field>

                <div class="flex-row pt-2">
                    <button mat-raised-button
                            color="warn"
                            class="m-lg-2"
                            type="button"
                            routerLink="/user"
                            i18n="UserAdd.button.cancel">Annuler
                    </button>
                    <button mat-raised-button
                            color="primary"
                            type="submit"
                            [disabled]="addUserForm.invalid"
                            i18n="UserAdd.button.submit">Ajouter
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

